<template lwc:render-mode="light">
    <div class="slds-p-right_large slds-p-left_x-small">
        <div
            if:true={showAddAllToCartButton}
            class="product-set__header slds-border_bottom slds-p-vertical_medium">
            <site-common-button-ui
                variant="primary"
                width="stretch"
                disabled={isAddAllToCartDisabled}
                onclick={handleAddAllToCartClick}>
                {addAllToCartButtonText}
            </site-common-button-ui>
        </div>
        <div class="product-set__items">
            <template
                for:each={products}
                for:item="productItem"
                for:index="index">
                <div
                    class="slds-border_bottom slds-p-vertical_medium"
                    key={productItem.index}>
                    <!-- This is to be used as a building block in the future -->
                    <site-product-set-item-container
                        data-index={index}
                        product={productItem.product}
                        quantity={productItem.quantity}
                        available-quantity={productItem.availableQuantity}
                        unavailable-price-label={unavailablePriceLabel}
                        last-lowest-price-label={lastLowestPriceLabel}
                        is-out-of-stock={productItem.isOutOfStock}
                        pricing-type={pricingType}
                        show-tax-indication={showTaxIndication}
                        product-selling-model-id={productItem.productSellingModelId}
                        subscription-term={productItem.subscriptionTerm}
                        product-id={productItem.id}
                        onquantitychanged={handleQuantityChanged}
                        onvaliditychanged={handleValidityChanged}
                        onvariantchanged={handleVariantChanged}
                        onchildproductpriceloaded={handleChildProductPriceLoaded}
                        show-product-image={showProductImage}
                        show-product-description={showProductDescription}
                        quantity-selector-label={quantitySelectorLabel}
                        minimum-value-guide-text={minimumValueGuideText}
                        maximum-value-guide-text={maximumValueGuideText}
                        increment-value-guide-text={incrementValueGuideText}
                        out-of-stock-text={outOfStockText}
                        onsubscriptionchanged={handleSubscriptionchanged}>
                        <span slot="lifeTimeLabel"><slot name="lifeTimeLabel"></slot></span>
                        <span slot="subscriptionLabel"><slot name="subscriptionLabel"></slot></span>
                    </site-product-set-item-container>
                </div>
            </template>
        </div>
    </div>
</template>
